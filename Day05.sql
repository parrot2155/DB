--DAY5

--CREATE : 객체 생성하는 DDL
--제약조건 : 테이블 생성 시 각 컬럼에 제한을 커는 조건.
--	NOT NULL, UNIQUE, CHECK, PRIMARY KEY, FOREIGN KEY

--생성된 테이블에 제약조건 추가하기
--테이블 수정한다.
--DDL의 ALTER 이용하여 추가

--[사용 형식]
--ALTER TABLE 테이블명 수정할 내용

--ALTER TABLE 테이블명 ADD PRIMARY KEY(컬럼명)
--ALTER TABLE 테이블명 ADD FOREIGN KWY(컬럼명) REFERENCES 참조할 테이블명(컬럼명)
--ALTER TABLE 테이블명 ADD UNIQUE(컬럼명)
--ALTER TABLE 테이블명 ADD CHECK(조건식)
--ALTER TABLE 테이블명 MODIFY 컬럼명 NOT NULL

SELECT * FROM EMPLOYEE;

--EMPLOYEE테이블에 제약조건 추가
ALTER TABLE EMPLOYEE ADD FOREIGN KEY(DEPT_CODE) REFERENCES DEPARTMENT;

ALTER TABLE EMPLOYEE ADD FOREIGN KEY(JOB_CODE) REFERENCES JOB;

ALTER TABLE EMPLOYEE ADD FOREIGN KEY(SAL_LEVEL) REFERENCES SAL_GRADE;

ALTER TABLE EMPLOYEE ADD CHECK(ENT_YN IN ('Y','N'));

ALTER TABLE EMPLOYEE ADD CHECK(SALARY > 0);

ALTER TABLE EMPLOYEE ADD UNIQUE(EMP_NO);

ALTER TABLE DEPARTMENT ADD FOREIGN KEY(LOCATION_ID) REFERENCES LOCATION;

ALTER TABLE LOCATION ADD FOREIGN KEY(NATIONAL_CODE) REFERENCES NATIONAL;


SELECT C1.TABLE_NAME, C1.CONSTRAINT_NAME, COLUMN_NAME, SEARCH_CONDITION, CONSTRAINT_TYPE
FROM USER_CONSTRAINTS C1
JOIN USER_CONS_COLUMNS C2 ON(C1.TABLE_NAME = C2.TABLE_NAME AND C1.CONSTRAINT_NAME = C2.CONSTRAINT_NAME)
WHERE C1.TABLE_NAME IN('EMPLOYEE','DEPARTMENT','LOCATION')
ORDER BY 1;

--제약조건 삭제 
--ALTER TABLE 테이블명 DROP CONSTRAINT 제약조건명;


--DML(데이터 조작 언어)
--INSERT, UPDATE, DELETE, SELECT(DQL)--
--[CRUD]
--CREATE	: INSERT/데이터추가
--READ		: SELECT/데이터 조회
--UPDATE	: UPDATE/데이터 수정
--DELETE	: DELETE/데이터 삭제

--INSERT : 새로운 행을 특정 테이블에 추가하는 명령어
--[사용형식]
--1. 특정 컬럼에만 값을 추가
--INSERT INTO 테이블명(컬럼명, 컬럼명,...) VLAUES(값, 값,...)

--2. 모든 컬럼에 값을 추가
--INSERT INTO 테이블명 VALUES(값, 값,...)

SELECT * FROM EMPLOYEE;

--INSERT 시 컬럼을 명시해서 데이터를 추가
INSERT INTO EMPLOYEE(EMP_ID, EMP_NAME, EMP_NO, EMAIL, PHONE, DEPT_CODE, JOB_CODE, SAL_LEVEL, SALARY, BONUS, MANAGER_ID, HIRE_DATE, ENT_DATE, ENT_YN)
VALUES (500,'박태욱','001122-1234567','PARK123@MULTI.COM','01012345678','D1','J7','S4','3100000',0.1,'200',SYSDATE,NULL,DEFAULT);

COMMIT;

--INSERT 시 컬럼 생략하고 데이터 추가 -> 모든 컬럼에 값을 명시해주어야한다.
INSERT INTO EMPLOYEE
VALUES(900,'박서준','880101-1234567','SEOJ123@MULTI.COM','01022223333','D1','J7','S3',4300000,0.2,'200',SYSDATE,NULL,DEFAULT);
SELECT * FROM EMPLOYEE WHERE EMP_ID IN(500, 900);
COMMIT; --지금까지 변경된 내용을 DB에 반영(저장)하겠다.
































